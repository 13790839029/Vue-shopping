{"version":3,"sources":["webpack:///src/pages/Category.vue","webpack:///./src/pages/Category.vue?387a","webpack:///./src/pages/Category.vue"],"names":["Category","mixins","mixin","computed","extends_default","Object","vuex_esm","data","leftTabIndex","list","active","dataList","listenScroll","isLoading","defaultId","components","Scroll","GoodsList","methods","scroll","x","y","console","log","item","val","i","this","bxMallSubDto","mallSubId","categoryTabList","hasOwnProperty","getList","$refs","scrollTo","onClick","index","category","change","id","_this","asyncToGenerator_default","regenerator_default","a","mark","_callee","_ref","wrap","_context","prev","next","showFlag","Api","sent","code","setCategoryTabList","t0","$toast","stop","setGoodDetails","getCategory","_this2","_callee2","_ref2","_context2","length","recommend","setTab","categorys","$route","params","beforeRouteUpdate","to","from","name","activated","created","pages_Category","render","_vm","_h","$createElement","_c","_self","attrs","title","left-arrow","fixed","_v","staticClass","ref","_l","key","mallCategoryId","class","on","click","$event","_s","mallCategoryName","model","value","callback","$$v","expression","directives","rawName","mallSubName","details","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/10.76ea2a855032716df715.js","sourcesContent":["<template>\r\n    <div>\r\n        <van-nav-bar title=\"商品分类\" :left-arrow='false' fixed/>\r\n        <div class=\"content\" >\r\n           <div class=\"left\" ref=\"left\">\r\n                <ul>\r\n                    <li v-for='(val,index) in category' :key='val.mallCategoryId'  :class=\"{active:leftTabIndex==index}\" @click=\"item(val,index)\">\r\n                        {{val.mallCategoryName}}\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n            <div class=\"right\" ref='right'>\r\n                <div class=\"empty\">\r\n                        <van-tabs v-model=\"active\" @click=\"onClick\" >\r\n                                <Scroll  v-show=\"!showFlag\" :data='dataList' class=\"scroll\" @scroll=\"scroll\" :listenScroll='listenScroll' ref=\"scroll\">\r\n                                    <div>\r\n                                        <van-tab v-for=\"val in list || category[0].bxMallSubDto\" :title=\"val.mallSubName\" :key=\"val.mallSubId\">\r\n                                            <GoodsList :list='dataList' @details='details'/>\r\n                                        </van-tab>\r\n                                    </div>\r\n                                </Scroll>\r\n                            \r\n                            </van-tabs>\r\n                        <div class=\"null\" v-show=\"!dataList.length && !showFlag\">\r\n                            暂无数据~~\r\n                        </div>\r\n                </div>\r\n            </div> \r\n        </div>\r\n        <BaseLoding :showFlag='showFlag'/>\r\n        <router-view />\r\n    </div>\r\n</template>\r\n<script>\r\nimport {mapGetters,mapMutations,mapActions} from 'vuex'\r\nimport Scroll from '@/components/public/Scroll'\r\nimport GoodsList from '@/components/public/GoodsList'\r\nimport {loading,details} from 'js/mixin'\r\nexport default {\r\n    mixins: [loading,details],\r\n    computed: {\r\n        ...mapGetters(['category','categoryTabList'])\r\n    },\r\n\r\n    data() {\r\n        return {\r\n            leftTabIndex: 0,\r\n            list: '',\r\n            active: 0,\r\n            dataList: [],\r\n            listenScroll: true,\r\n            isLoading: false,\r\n            defaultId : '2c9f6c946016ea9b016016f79c8e0000',\r\n            Category: false\r\n        }\r\n    },\r\n\r\n    \r\n    components: {\r\n        Scroll,\r\n        GoodsList,\r\n    },\r\n\r\n    methods: {\r\n        scroll(x,y) {\r\n            console.log(x,y);\r\n            \r\n        },\r\n        item(val,i) {\r\n            this.active = 0\r\n            this.list = val.bxMallSubDto\r\n            if (this.leftTabIndex == i) return\r\n            this.leftTabIndex = i\r\n            let mallSubId = val.bxMallSubDto[0].mallSubId\r\n            this.dataList = this.categoryTabList.hasOwnProperty(mallSubId) ?  this.dataList = this.categoryTabList[mallSubId] : this.getList(mallSubId)\r\n            this.$refs.scroll.scrollTo(0,0,300)\r\n        },\r\n\r\n        onClick(index) {\r\n            this.dataList = []\r\n            const mallSubId = this.category[this.leftTabIndex].bxMallSubDto[index].mallSubId\r\n            this.dataList = this.categoryTabList.hasOwnProperty(mallSubId) ?  this.dataList = this.categoryTabList[mallSubId] : this.getList(mallSubId)\r\n\r\n        },\r\n\r\n        change(index) {\r\n            this.onClick(index)\r\n        },\r\n\r\n        async getList(id) {\r\n            try {\r\n                this.dataList = []\r\n                this.showFlag = true\r\n                const { data } = await this.Api.category(id)\r\n                if (data.code == 200) {\r\n                    this.showFlag = false\r\n                    this.dataList = data.dataList\r\n                    this.setCategoryTabList({\r\n                        id,\r\n                        list: data.dataList\r\n                    })\r\n                }\r\n            } catch (error) {\r\n                console.log(error);\r\n                \r\n                this.showFlag = false\r\n                this.$toast('网络错误')\r\n            }\r\n        },\r\n\r\n        ...mapMutations({\r\n            setGoodDetails: 'GOODSDETAILS'\r\n        }),\r\n\r\n        ...mapActions(['setTab','setCategoryTabList']),\r\n\r\n        async getCategory() {\r\n            if (!this.category.length) {\r\n                const { data } = await this.Api.recommend()\r\n                if (data.code == 200) {\r\n                    this.setTab(data.data.category)\r\n                }\r\n            }\r\n        },\r\n\r\n        categorys() {\r\n            const id = this.$route.params.id\r\n            const index = this.$route.params.index\r\n            const val = this.$route.params.val\r\n            console.log(id,index,val);\r\n            \r\n            if (id && index || index == 0 && val) {\r\n                this.list = val.bxMallSubDto\r\n                this.leftTabIndex = index\r\n                this.getList(id)\r\n            }  \r\n        }\r\n    },\r\n\r\n    beforeRouteUpdate (to, from, next) {\r\n        if (from.name !== 'Category') {\r\n            this.Category = true\r\n        }\r\n        next()\r\n\r\n    },\r\n   \r\n\r\n    activated() {\r\n        this.categorys()\r\n                    \r\n\r\n    },\r\n\r\n    created() {\r\n        const id = this.$route.params.id\r\n        const index = this.$route.params.index\r\n        const val = this.$route.params.val\r\n        if (id && index && val) {\r\n            this.list = val.bxMallSubDto\r\n            this.leftTabIndex = index\r\n            this.getList(id)\r\n            return\r\n        }  \r\n        this.getList(this.defaultId)\r\n        this.getCategory()\r\n    },\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"stylus\">\r\n.content\r\n    display: flex\r\n    position: fixed\r\n    top 39px\r\n    left 0\r\n    right: 0\r\n    bottom: 0\r\n    // background: #EFEFEF\r\n    .left\r\n        flex: 0 0 80px\r\n        background: #F1F8FF\r\n        padding-bottom 55px\r\n        height 100%\r\n        overflow hidden\r\n        ul\r\n            height 100%\r\n            overflow hidden\r\n        .active\r\n            background: #fff\r\n        li\r\n            color: #666\r\n            height: 43px\r\n            line-height: 43px\r\n            font-size: 14px\r\n            text-align center\r\n            border-bottom: 1px solid #EFEFEF\r\n    .right\r\n        flex: 1\r\n        .empty\r\n            text-align: center\r\n            font-size: 15px\r\n            .null\r\n                padding-top 30px\r\n                box-sizing border-box\r\n                color #bbb\r\n            .scroll\r\n                overflow hidden\r\n                position fixed\r\n                bottom 50px\r\n                top 85px\r\n\r\n</style>\r\n// 姓名，电话\n\n\n// WEBPACK FOOTER //\n// src/pages/Category.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('van-nav-bar',{attrs:{\"title\":\"商品分类\",\"left-arrow\":false,\"fixed\":\"\"}}),_vm._v(\" \"),_c('div',{staticClass:\"content\"},[_c('div',{ref:\"left\",staticClass:\"left\"},[_c('ul',_vm._l((_vm.category),function(val,index){return _c('li',{key:val.mallCategoryId,class:{active:_vm.leftTabIndex==index},on:{\"click\":function($event){_vm.item(val,index)}}},[_vm._v(\"\\n                    \"+_vm._s(val.mallCategoryName)+\"\\n                \")])}))]),_vm._v(\" \"),_c('div',{ref:\"right\",staticClass:\"right\"},[_c('div',{staticClass:\"empty\"},[_c('van-tabs',{on:{\"click\":_vm.onClick},model:{value:(_vm.active),callback:function ($$v) {_vm.active=$$v},expression:\"active\"}},[_c('Scroll',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.showFlag),expression:\"!showFlag\"}],ref:\"scroll\",staticClass:\"scroll\",attrs:{\"data\":_vm.dataList,\"listenScroll\":_vm.listenScroll},on:{\"scroll\":_vm.scroll}},[_c('div',_vm._l((_vm.list || _vm.category[0].bxMallSubDto),function(val){return _c('van-tab',{key:val.mallSubId,attrs:{\"title\":val.mallSubName}},[_c('GoodsList',{attrs:{\"list\":_vm.dataList},on:{\"details\":_vm.details}})],1)}))])],1),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.dataList.length && !_vm.showFlag),expression:\"!dataList.length && !showFlag\"}],staticClass:\"null\"},[_vm._v(\"\\n                        暂无数据~~\\n                    \")])],1)])]),_vm._v(\" \"),_c('BaseLoding',{attrs:{\"showFlag\":_vm.showFlag}}),_vm._v(\" \"),_c('router-view')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-e86b8fb4\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/Category.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-e86b8fb4\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Category.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Category.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Category.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-e86b8fb4\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Category.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-e86b8fb4\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/Category.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}