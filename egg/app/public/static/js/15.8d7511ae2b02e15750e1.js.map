{"version":3,"sources":["webpack:///src/pages/Address.vue","webpack:///./src/pages/Address.vue?6a61","webpack:///./src/pages/Address.vue"],"names":["Address","name","mixins","components","Scroll","data","chosenAddressId","list","isPay","methods","extends_default","onAdd","this","$router","push","goBack","go","onEdit","item","index","setAddress","setDefaultAddress","id","_this","asyncToGenerator_default","regenerator_default","a","mark","_callee","_ref","wrap","_context","prev","next","Api","sent","code","$toast","t0","stop","onSelect","_this2","setAddress2","setTimeout","_id","Object","vuex_esm","created","_this3","_callee2","_ref2","defaultAddress","i","_context2","showFlag","getAddress","address","reverse","length","isDefault","splice","unshift","String","console","log","beforeRouteEnter","to","from","vm","pages_Address","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","title","left-arrow","on","click-left","_v","directives","rawName","value","expression","edit","select","model","callback","$$v","_e","click","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/15.8d7511ae2b02e15750e1.js","sourcesContent":["<template>\r\n        <div class=\"address\">\r\n        <van-nav-bar\r\n            title=\"地址列表\"\r\n            left-arrow\r\n            @click-left=\"goBack\"\r\n        />\r\n            <Scroll :data='list' class=\"scroll\"  v-show=\"!showFlag\">\r\n                <div>\r\n                    <van-address-list\r\n                        v-model=\"chosenAddressId\"\r\n                        :list=\"list\"\r\n                        @edit=\"onEdit\"\r\n                        @select='onSelect'\r\n                    />\r\n                </div>\r\n                 <div v-if=\"!list || !list.length\" class=\"nolist\">\r\n                    暂无收货地址~~\r\n                </div>\r\n            </Scroll>\r\n        <div class=\"add\" @click=\"onAdd\">新增地址</div>\r\n        <BaseLoding :showFlag='showFlag'/>\r\n        </div>\r\n</template>\r\n\r\n<script>\r\nimport Scroll from '@/components/public/Scroll'\r\nimport {mapActions,mapMutations} from 'vuex'\r\nimport {loading} from 'js/mixin'\r\nexport default {\r\n    name: 'Address',\r\n    mixins: [loading],\r\n    components: {\r\n        Scroll,\r\n    },\r\n\r\n    data() {\r\n        return {\r\n            chosenAddressId: '1',\r\n            list: [],\r\n            isPay: false,\r\n               \r\n        }\r\n    },\r\n\r\n    methods: {\r\n        onAdd() {\r\n            this.$router.push('/addressEdit')\r\n        },\r\n\r\n        goBack() {\r\n            this.$router.go(-1)\r\n        },\r\n\r\n        onEdit(item, index) {\r\n            this.setAddress(item)\r\n            this.$router.push('/addressEdit')\r\n        },\r\n\r\n        async setDefaultAddress(id) {\r\n            try {\r\n                const {data} = await this.Api.setDefaultAddress(id)\r\n                if (data.code == 200) {\r\n                    this.$toast('设置默认地址成功')\r\n                }\r\n            } catch (error) {\r\n                this.$toast('网络错误')\r\n            }\r\n            \r\n        },\r\n\r\n        onSelect(item) {\r\n            if (this.isPay) {   // 判断是不是从订单页面过来的\r\n                this.setAddress2(item)\r\n                setTimeout(() => {\r\n                    this.$router.go(-1)\r\n                }, 500);\r\n            } else {\r\n                // 选中设置默认地址\r\n                this.setDefaultAddress(item._id)                \r\n            }\r\n        },\r\n        \r\n        ...mapActions(['setAddress']),\r\n        \r\n        ...mapMutations({\r\n            setAddress2: 'TEMPORARYADDRESS'\r\n        })\r\n        \r\n    },\r\n\r\n \r\n    async created() {\r\n        // 查询地址\r\n        try {\r\n            this.showFlag = true\r\n            const {data} = await this.Api.getAddress()\r\n            if (data.code == 200) {\r\n                this.showFlag = false\r\n                this.list = data.address.reverse()\r\n                let defaultAddress\r\n                for (let i = 0; i < this.list.length; i++) {\r\n                    if (this.list[i].isDefault == true) {\r\n                        defaultAddress = this.list[i]\r\n                        defaultAddress.id = '1'\r\n                        this.list.splice(i,1)\r\n                        this.list.unshift(defaultAddress)\r\n                    } else {\r\n                        this.list[i].id = String( i+2)\r\n                    }\r\n                }                                \r\n            }\r\n        } catch (error) {\r\n            console.log(error);\r\n            this.$toast('网络错误')\r\n            this.showFlag = false\r\n        }\r\n    },\r\n\r\n    beforeRouteEnter (to, from,next) {\r\n        next(vm => {\r\n            if (from.name == \"ShoppingPayMent\") {\r\n                vm.isPay = true\r\n            }\r\n            // 通过 `vm` 访问组件实例\r\n        })\r\n    }\r\n    }\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n    .address\r\n        position fixed\r\n        top 0px\r\n        left 0\r\n        right 0\r\n        bottom 0px\r\n        z-index 500\r\n        background #fff\r\n        .scroll\r\n            position fixed\r\n            top 38px\r\n            bottom 50px\r\n            left 0\r\n            right 0\r\n            overflow hidden\r\n            .nolist\r\n                text-align center\r\n                font-size 16px\r\n                letter-spacing 2px\r\n                color #bbb\r\n                margin-top 50px\r\n    .add\r\n        height 50px\r\n        position fixed\r\n        left 0\r\n        right 0\r\n        bottom 0\r\n        background #f44\r\n        color #fff    \r\n        text-align center\r\n        font-size 15px\r\n        letter-spacing 2px\r\n        line-height 50px\r\n        z-index 201     \r\n</style>\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/Address.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"address\"},[_c('van-nav-bar',{attrs:{\"title\":\"地址列表\",\"left-arrow\":\"\"},on:{\"click-left\":_vm.goBack}}),_vm._v(\" \"),_c('Scroll',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.showFlag),expression:\"!showFlag\"}],staticClass:\"scroll\",attrs:{\"data\":_vm.list}},[_c('div',[_c('van-address-list',{attrs:{\"list\":_vm.list},on:{\"edit\":_vm.onEdit,\"select\":_vm.onSelect},model:{value:(_vm.chosenAddressId),callback:function ($$v) {_vm.chosenAddressId=$$v},expression:\"chosenAddressId\"}})],1),_vm._v(\" \"),(!_vm.list || !_vm.list.length)?_c('div',{staticClass:\"nolist\"},[_vm._v(\"\\n            暂无收货地址~~\\n        \")]):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"add\",on:{\"click\":_vm.onAdd}},[_vm._v(\"新增地址\")]),_vm._v(\" \"),_c('BaseLoding',{attrs:{\"showFlag\":_vm.showFlag}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0d435112\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/Address.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0d435112\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Address.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Address.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Address.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0d435112\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Address.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-0d435112\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/Address.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}