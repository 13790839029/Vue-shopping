{"version":3,"sources":["webpack:///src/pages/Collection.vue","webpack:///./src/pages/Collection.vue?3b78","webpack:///./src/pages/Collection.vue"],"names":["Collection","name","mixins","mixin","components","Scroll","GoodsList","computed","extends_default","Object","vuex_esm","data","isCollection","list","isText","page","loading2","created","this","getCollection","beforeRouteUpdate","to","from","next","methods","goBack","$router","go","flag","_this","asyncToGenerator_default","regenerator_default","a","mark","_callee","_ref","wrap","_context","prev","userName","showFlag","abrupt","isLocked","locked","Api","sent","code","setTotal","count","unLocked","setNewData","dataArr","t0","$toast","stop","close","item","index","_this2","_callee2","_ref2","_context2","splice","cancelCollection","cid","setGoodDetails","scrollToEnd","length","hasMore","pages_Collection","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","title","left-arrow","on","click-left","_v","pullup","details","_e","_s","directives","rawName","value","expression","staticStyle","color","viewBox","cx","cy","r","fill","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/11.f91cb382d338233963d7.js","sourcesContent":["<template>\r\n    <!-- 我的收藏 -->\r\n    <div class=\"browse-warp\">\r\n        <van-nav-bar\r\n            title=\"我的收藏\"\r\n            left-arrow\r\n            @click-left=\"goBack\"\r\n        />\r\n        <Scroll  :pullup='true' @scrollToEnd='scrollToEnd'  :data='dataArr' class=\"scroll\">\r\n            <div>\r\n                <GoodsList  :list='dataArr' :isCollection='isCollection' @details='details' @close='close'/>\r\n            </div>\r\n            <div v-if=\"!dataArr.length\" class=\"null\">\r\n                 {{userName ?'暂无收藏~~' : '请先登录噢~~'}}\r\n            </div>\r\n            <div v-show=\"loading2\" class=\"van-loading van-loading--circular van-loading--white\" style=\"color: white;\"><span class=\"van-loading__spinner van-loading__spinner--circular\"><svg viewBox=\"25 25 50 50\" class=\"van-loading__circular\"><circle cx=\"50\" cy=\"50\" r=\"20\" fill=\"none\"></circle></svg></span></div>\r\n        </Scroll>\r\n        <router-view/>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport Scroll from '@/components/public/Scroll'\r\nimport GoodsList from '@/components/public/GoodsList'\r\nimport {loading} from 'js/mixin'\r\nimport {mapMutations,mapGetters} from 'vuex'\r\nimport {page,details} from 'js/mixin'\r\nexport default {\r\n    name: 'Collection',\r\n    mixins: [loading,page,details],\r\n    components: {\r\n        Scroll,\r\n        GoodsList,\r\n    },\r\n\r\n    computed: {\r\n        ...mapGetters(['userName'])\r\n    },\r\n\r\n    data() {\r\n        return {\r\n            isCollection: true,\r\n            list: [],\r\n            isText: false,\r\n            page: 1,\r\n            loading2: false,\r\n        }\r\n    },\r\n\r\n    created() {\r\n        this.getCollection()\r\n    },\r\n    beforeRouteUpdate (to, from, next) {\r\n        if (from.name == 'Details') {\r\n            this.getCollection()\r\n        }\r\n        next()\r\n        \r\n    },\r\n    methods: {\r\n        goBack() {\r\n            this.$router.go(-1)\r\n        },\r\n\r\n        async getCollection(flag) {\r\n            if (!this.userName) {\r\n                this.showFlag = false\r\n                return\r\n            }\r\n            try {\r\n                if (this.isLocked()) return // 必须等待上一次请求完成\r\n                this.locked()//开始请求之前锁住\r\n                this.loading2 = true\r\n                const {data} = await this.Api.getCollection(this.page)\r\n                if (data.code == 200) {\r\n                    // this.showFlag = false\r\n                    this.loading2 = false\r\n                    this.setTotal(data.data.count)  // 总条数\r\n                    this.unLocked() // 解锁\r\n                    if (flag) {\r\n                        this.setNewData(data.data.list)\r\n                    } else {\r\n                        this.dataArr = data.data.list\r\n                    }\r\n                } else {\r\n                    this.isText = true\r\n                }\r\n            } catch (error) {\r\n                this.unLocked() // 解锁\r\n                this.$toast('网络错误')\r\n                this.loading2 = false\r\n            }\r\n        },\r\n        // 这里是取消收藏\r\n        async close(item,index) {\r\n            this.dataArr.splice(index,1)\r\n            try {\r\n                const {data} = await this.Api.cancelCollection(item.cid)\r\n                if (data.code == 200) {\r\n                    // this.getCollection()\r\n                }\r\n            } catch (error) {\r\n                this.$toast('网络错误')\r\n            }\r\n        },\r\n\r\n        ...mapMutations({\r\n            setGoodDetails: 'GOODSDETAILS'\r\n        }),\r\n\r\n        // 上拉加载\r\n        scrollToEnd() {\r\n            if (this.dataArr.length >= 10) {\r\n                if (this.hasMore()) {\r\n                    this.page++\r\n                    this.getCollection(true)\r\n                } else {\r\n                    this.$toast('没有更多数据了~~')\r\n                }\r\n            }\r\n            \r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n.browse-warp\r\n    position fixed\r\n    top 0\r\n    left 0\r\n    right 0\r\n    bottom 0\r\n    z-index 500\r\n    background #fff\r\n    .scroll\r\n        position fixed\r\n        top 40px\r\n        bottom 0px\r\n        left 0\r\n        right 0\r\n        overflow hidden\r\n        \r\n\r\n</style>\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/Collection.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"browse-warp\"},[_c('van-nav-bar',{attrs:{\"title\":\"我的收藏\",\"left-arrow\":\"\"},on:{\"click-left\":_vm.goBack}}),_vm._v(\" \"),_c('Scroll',{staticClass:\"scroll\",attrs:{\"pullup\":true,\"data\":_vm.dataArr},on:{\"scrollToEnd\":_vm.scrollToEnd}},[_c('div',[_c('GoodsList',{attrs:{\"list\":_vm.dataArr,\"isCollection\":_vm.isCollection},on:{\"details\":_vm.details,\"close\":_vm.close}})],1),_vm._v(\" \"),(!_vm.dataArr.length)?_c('div',{staticClass:\"null\"},[_vm._v(\"\\n             \"+_vm._s(_vm.userName ?'暂无收藏~~' : '请先登录噢~~')+\"\\n        \")]):_vm._e(),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.loading2),expression:\"loading2\"}],staticClass:\"van-loading van-loading--circular van-loading--white\",staticStyle:{\"color\":\"white\"}},[_c('span',{staticClass:\"van-loading__spinner van-loading__spinner--circular\"},[_c('svg',{staticClass:\"van-loading__circular\",attrs:{\"viewBox\":\"25 25 50 50\"}},[_c('circle',{attrs:{\"cx\":\"50\",\"cy\":\"50\",\"r\":\"20\",\"fill\":\"none\"}})])])])]),_vm._v(\" \"),_c('router-view')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-8917c09a\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/Collection.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-8917c09a\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Collection.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Collection.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Collection.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-8917c09a\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Collection.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-8917c09a\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/Collection.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}