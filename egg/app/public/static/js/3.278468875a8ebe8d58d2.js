webpackJsonp([3],{JuvI:function(t,e){},P7ry:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("Xxa5"),s=a.n(r),n=a("exGp"),i=a.n(n),o=a("Dd8w"),c=a.n(o),l=a("wtXQ"),u=a("NYxO"),v={mixins:[a("5jRo").b],data:function(){return{nickname:"",password:"",tip:"",timer:0,regLoding:!1,loginLoding:!1,verify:this.Api.averify(),verifyTxt:""}},components:{Back:l.a},methods:c()({login:function(t){this.nickname&&this.password?this.verifyTxt?t?this.register(!0):this.register(!1):$toast("请输入验证码"):$toast("请输入用户名或者密码")},register:function(t){var e=this;return i()(s.a.mark(function a(){var r,n,i,o;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!t){a.next=18;break}return a.prev=1,e.regLoding=!0,a.next=5,e.Api.register(e.nickname,e.password,e.verifyTxt);case 5:r=a.sent,200==(n=r.data).code&&(e.setName(n.userInfo),setTimeout(function(){e.$router.go(-1)},1500)),e.regLoding=!1,e.$toast(n.msg),a.next=16;break;case 12:a.prev=12,a.t0=a.catch(1),e.$toast("网络错误"),e.regLoding=!1;case 16:a.next=33;break;case 18:return a.prev=18,e.loginLoding=!0,a.next=22,e.Api.login(e.nickname,e.password,e.verifyTxt);case 22:i=a.sent,200==(o=i.data).code&&(e.setName(o.userInfo),setTimeout(function(){e.$router.go(-1)},1500)),e.loginLoding=!1,e.$toast(o.msg),a.next=33;break;case 29:a.prev=29,a.t1=a.catch(18),e.$toast("网络错误"),e.loginLoding=!1;case 33:case"end":return a.stop()}},a,e,[[1,12],[18,29]])}))()}},Object(u.d)({setName:"USERNAME"})),beforeRouteEnter:function(t,e,a){var r,n=this;a((r=i()(s.a.mark(function t(e){var a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.Api.keeplogin();case 3:a=t.sent,200==a.data.code&&e.$router.push({path:"/"}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),e.$toast("网络错误");case 11:case"end":return t.stop()}},t,n,[[0,8]])})),function(t){return r.apply(this,arguments)}))}},p={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"login"},[r("img",{staticClass:"login-img",attrs:{src:a("hreQ"),alt:"",srcset:""}}),t._v(" "),r("div",{staticClass:"form"},[r("div",{staticClass:"form-cont"},[r("p",{staticClass:"login-title"},[t._v("登录 / 注册")]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"sr-only",attrs:{for:"username"}},[t._v("USERNAME")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.nickname,expression:"nickname"}],staticClass:"form-control",attrs:{type:"text",maxlength:"16",placeholder:"USERNAME",autocomplete:"off"},domProps:{value:t.nickname},on:{input:function(e){e.target.composing||(t.nickname=e.target.value)}}})]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"sr-only",attrs:{for:"password"}},[t._v("PASSWORD")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",maxlength:"16",placeholder:"PASSWORD",autocomplete:"off"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),t._v(" "),r("div",{staticClass:"form-group verify"},[r("label",{staticClass:"col-sm-2 control-label",attrs:{for:"inputEmail3"}},[t._v("验证码：")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.verifyTxt,expression:"verifyTxt"}],staticClass:"form-control verify-input",attrs:{type:"text",placeholder:"请输入验证码",maxlength:"4",autocomplete:"off"},domProps:{value:t.verifyTxt},on:{input:function(e){e.target.composing||(t.verifyTxt=e.target.value)}}}),t._v(" "),r("div",{staticClass:"col-sm-10"},[r("img",{ref:"eleVerify",attrs:{src:t.verify,alt:"",onclick:"javascript:this.src='/api/verify?mt='+Math.random()",srcset:"",title:"看不清？点击刷新"}})])]),t._v(" "),r("div",{staticClass:"form-group form-group2"},[r("van-button",{attrs:{loading:t.loginLoding,type:"primary"},on:{click:function(e){t.login(!1)}}},[t._v("登 录")]),t._v(" "),r("van-button",{attrs:{loading:t.regLoding,type:"danger"},on:{click:function(e){t.login(!0)}}},[t._v("注册")])],1)])]),t._v(" "),r("Back",{on:{back:t.back}})],1)},staticRenderFns:[]};var f=a("VU/8")(v,p,!1,function(t){a("vUFA")},"data-v-24f4b980",null);e.default=f.exports},hreQ:function(t,e,a){t.exports=a.p+"static/img/login.4e54e53.jpg"},vUFA:function(t,e){},wtXQ:function(t,e,a){"use strict";var r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"icon",on:{click:this.back}},[e("van-icon",{staticClass:"arrow",attrs:{name:"arrow-left"}})],1)},staticRenderFns:[]};var s=a("VU/8")({methods:{back:function(){this.$emit("back")}}},r,!1,function(t){a("JuvI")},"data-v-1280abbf",null);e.a=s.exports}});
//# sourceMappingURL=3.278468875a8ebe8d58d2.js.map