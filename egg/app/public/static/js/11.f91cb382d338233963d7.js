webpackJsonp([11],{"BVU/":function(t,e){},TZzH:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Xxa5"),r=a.n(n),s=a("exGp"),o=a.n(s),i=a("Dd8w"),c=a.n(i),l=a("6mRb"),d=a("AYGF"),u=a("5jRo"),v=a("NYxO"),p={name:"Collection",mixins:[u.c,u.d,u.a],components:{Scroll:l.a,GoodsList:d.a},computed:c()({},Object(v.c)(["userName"])),data:function(){return{isCollection:!0,list:[],isText:!1,page:1,loading2:!1}},created:function(){this.getCollection()},beforeRouteUpdate:function(t,e,a){"Details"==e.name&&this.getCollection(),a()},methods:c()({goBack:function(){this.$router.go(-1)},getCollection:function(t){var e=this;return o()(r.a.mark(function a(){var n,s;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(e.userName){a.next=3;break}return e.showFlag=!1,a.abrupt("return");case 3:if(a.prev=3,!e.isLocked()){a.next=6;break}return a.abrupt("return");case 6:return e.locked(),e.loading2=!0,a.next=10,e.Api.getCollection(e.page);case 10:n=a.sent,200==(s=n.data).code?(e.loading2=!1,e.setTotal(s.data.count),e.unLocked(),t?e.setNewData(s.data.list):e.dataArr=s.data.list):e.isText=!0,a.next=20;break;case 15:a.prev=15,a.t0=a.catch(3),e.unLocked(),e.$toast("网络错误"),e.loading2=!1;case 20:case"end":return a.stop()}},a,e,[[3,15]])}))()},close:function(t,e){var a=this;return o()(r.a.mark(function n(){var s;return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a.dataArr.splice(e,1),n.prev=1,n.next=4,a.Api.cancelCollection(t.cid);case 4:s=n.sent,s.data.code,n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),a.$toast("网络错误");case 12:case"end":return n.stop()}},n,a,[[1,9]])}))()}},Object(v.d)({setGoodDetails:"GOODSDETAILS"}),{scrollToEnd:function(){this.dataArr.length>=10&&(this.hasMore()?(this.page++,this.getCollection(!0)):this.$toast("没有更多数据了~~"))}})},g={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"browse-warp"},[a("van-nav-bar",{attrs:{title:"我的收藏","left-arrow":""},on:{"click-left":t.goBack}}),t._v(" "),a("Scroll",{staticClass:"scroll",attrs:{pullup:!0,data:t.dataArr},on:{scrollToEnd:t.scrollToEnd}},[a("div",[a("GoodsList",{attrs:{list:t.dataArr,isCollection:t.isCollection},on:{details:t.details,close:t.close}})],1),t._v(" "),t.dataArr.length?t._e():a("div",{staticClass:"null"},[t._v("\n             "+t._s(t.userName?"暂无收藏~~":"请先登录噢~~")+"\n        ")]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.loading2,expression:"loading2"}],staticClass:"van-loading van-loading--circular van-loading--white",staticStyle:{color:"white"}},[a("span",{staticClass:"van-loading__spinner van-loading__spinner--circular"},[a("svg",{staticClass:"van-loading__circular",attrs:{viewBox:"25 25 50 50"}},[a("circle",{attrs:{cx:"50",cy:"50",r:"20",fill:"none"}})])])])]),t._v(" "),a("router-view")],1)},staticRenderFns:[]};var f=a("VU/8")(p,g,!1,function(t){a("BVU/")},"data-v-8917c09a",null);e.default=f.exports}});
//# sourceMappingURL=11.f91cb382d338233963d7.js.map