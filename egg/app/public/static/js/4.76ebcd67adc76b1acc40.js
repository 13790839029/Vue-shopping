webpackJsonp([4],{"DTB/":function(t,s){},JuvI:function(t,s){},d8kT:function(t,s){},t3vu:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e("bOdI"),o=e.n(a),n=e("Xxa5"),i=e.n(n),c=e("exGp"),r=e.n(c),l=e("Dd8w"),d=e.n(l),u=e("6mRb"),v=e("wtXQ"),p=e("5jRo"),m=e("NYxO"),g=e("Fd2+"),h={data:function(){return{count:1}},methods:{minus:function(){1!=this.count?this.count--:$toast("至少选择1件~~")},plus:function(){this.count>=50?$toast("最多选择50件噢~~"):this.count++}},watch:{count:function(t){this.$emit("count",t)}}},_={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"right"},[e("button",{staticClass:"van-stepper__minus add",class:{"van-stepper__minus--disabled":1==t.count},on:{click:t.minus}}),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.count,expression:"count"}],staticClass:"van-stepper__input",attrs:{type:"number",disabled:""},domProps:{value:t.count},on:{input:function(s){s.target.composing||(t.count=s.target.value)}}}),t._v(" "),e("button",{staticClass:"van-stepper__plus",class:{"van-stepper__plus--disabled":15==t.count},on:{click:t.plus}})])},staticRenderFns:[]};var f=e("VU/8")(h,_,!1,function(t){e("d8kT")},"data-v-1dfffdcf",null).exports,w={name:"Details",props:["id"],mixins:[p.c,p.b,p.d],components:{Back:v.a,AdditionAndSubtraction:f,Scroll:u.a},data:function(){return{goods:{},defaultImg:'this.src="'+e("5Qfe")+'"',active:0,item:[{id:0,title:"商品详情"},{id:1,title:"商品评论"}],isCollectionFlag:!1,showBase:!1,newCount:1,comment:"",current:0,page:1,bounce:{bottom:!1}}},computed:d()({},Object(m.c)(["goodsDetails","userName"])),methods:d()({formatPrice:function(){return"¥"+(this.goods.price/100).toFixed(2)},onChange:function(t){this.current=t},onClickCart:function(){this.$router.push("/shoppingCart")},goHome:function(){this.$router.push({path:"/home"})},goodsItem:function(){var t=this,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.goodsDetails.goodsId,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return r()(i.a.mark(function a(){var o,n;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,!t.isLocked()){a.next=3;break}return a.abrupt("return");case 3:return t.locked(),a.next=6,t.Api.goodOne(s,t.page);case 6:o=a.sent,200==(n=o.data).code&&(t.setTotal(n.goods.count),t.unLocked(),t.$refs.swiperImg.style.opacity=1,t.$refs.swiperImg2.style.opacity=1,n.goods.goodsOne&&(t.goods=n.goods.goodsOne,setTimeout(function(){t.setBrowse(n.goods.goodsOne)},300)),e?t.setNewData(n.goods.comment):t.dataArr=n.goods.comment),a.next=17;break;case 11:a.prev=11,a.t0=a.catch(0),t.showFlag=!1,t.isCollectionFlag=!0,t.unLocked(),t.$toast("网络错误");case 17:case"end":return a.stop()}},a,t,[[0,11]])}))()},scrollToEnd:function(){var t=this;setTimeout(function(){t.$refs.scroll.refresh()},20),1==this.active&&this.dataArr.length>=5&&(this.page++,this.hasMore()?this.goodsItem(this.id,!0):this.$toast("没有更多评论了~~"))},isCollection:function(t){var s=this;return r()(i.a.mark(function e(){var a,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s.showFlag=!0,e.next=3,s.Api.isCollection(t);case 3:a=e.sent,200==(o=a.data).code?(s.showFlag=!1,1==o.isCollection?s.isCollectionFlag=!1:s.isCollectionFlag=!0):(s.showFlag=!1,s.isCollectionFlag=!0);case 6:case"end":return e.stop()}},e,s)}))()},collection:function(){var t=this;return r()(i.a.mark(function s(){var e,a,o,n;return i.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(t.userName){s.next=3;break}return t.$router.push({path:"/login"}),s.abrupt("return");case 3:if(!t.isCollectionFlag){s.next=19;break}return delete(e=t.goods)._id,s.prev=6,s.next=9,t.Api.collection(e);case 9:a=s.sent,200==(o=a.data).code&&(t.$toast(o.msg),t.isCollectionFlag=!1),s.next=17;break;case 14:s.prev=14,s.t0=s.catch(6),t.$toast("收藏失败,网络错误");case 17:s.next=30;break;case 19:return s.prev=19,s.next=22,t.Api.cancelCollection(t.goods.id);case 22:n=s.sent,200==n.data.code&&(t.isCollectionFlag=!0),s.next=30;break;case 27:s.prev=27,s.t1=s.catch(19),t.$toast("网络错误");case 30:case"end":return s.stop()}},s,t,[[6,14],[19,27]])}))()},addShops:function(){var t=this;return r()(i.a.mark(function s(){var e,a;return i.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(t.userName){s.next=3;break}return t.$router.push({path:"/login"}),s.abrupt("return");case 3:return s.prev=3,s.next=6,t.Api.addShop(t.goodsDetails.goodsId||t.goodsDetails.id);case 6:e=s.sent,200==(a=e.data).code&&t.$toast(a.msg),s.next=14;break;case 11:s.prev=11,s.t0=s.catch(3),t.$toast("网络错误");case 14:case"end":return s.stop()}},s,t,[[3,11]])}))()},purchase:function(){this.showBase=!0},count:function(t){this.newCount=t},PurchaseImmediately:function(){if(this.userName){var t=[o()({check:!0,count:this.newCount,cid:this.goods.id,image_path:this.goods.image_path,mallPrice:this.goods.present_price*this.newCount,present_price:this.goods.present_price,name:this.goods.name,idDirect:!0},"count",this.newCount)];this.$router.push({path:"/ShoppingPayMent"}),this.setShopList(t)}else this.$router.push({path:"/login"})}},Object(m.d)({setShopList:"SHOPORDERLIST"}),Object(m.b)(["setBrowse"]),{showImagePreview:function(){Object(g.o)({images:[this.goods.image,this.goods.image],startPosition:0,showIndicators:!0})}}),created:function(){this.goodsItem(this.id),this.isCollection(this.goodsDetails.goodsId||this.goodsDetails.id||this.id)},mounted:function(){document.querySelector(".van-tabs__line").classList.add("swip"),this.$refs.swiperImg.style.opacity=0,this.$refs.swiperImg2.style.opacity=0},watch:{active:function(t,s){1==t?(document.querySelector(".van-tabs__line").classList.remove("swip"),this.bounce.bottom=!0):this.bounce.bottom=!1}}},C={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"goods"},[e("Scroll",{ref:"scroll",staticClass:"scroll",attrs:{bounce:t.bounce,pullup:!0},on:{scrollToEnd:t.scrollToEnd}},[e("div",[e("van-swipe",{staticClass:"goods-swipe",attrs:{autoplay:3e3,touchable:!1},on:{change:t.onChange}},[e("van-swipe-item",[e("img",{ref:"swiperImg",attrs:{src:t.goods.image,onerror:t.defaultImg},on:{click:t.showImagePreview}})]),t._v(" "),e("van-swipe-item",[e("img",{ref:"swiperImg2",attrs:{src:t.goods.image,onerror:t.defaultImg},on:{click:t.showImagePreview}})]),t._v(" "),e("div",{staticClass:"custom-indicator",attrs:{slot:"indicator"},slot:"indicator"},[t._v(t._s(t.current+1)+"/2")])],1),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.showFlag,expression:"!showFlag"}]},[e("van-cell-group",[e("van-cell",[e("div",{staticClass:"goods-title"},[t._v(t._s(t.goods.name))]),t._v(" "),e("div",{staticClass:"goods-price"},[t._v("￥"+t._s(t.goods.present_price))])]),t._v(" "),e("van-cell",{staticClass:"goods-express"},[e("van-col",{attrs:{span:"9"}},[t._v("运费："+t._s(t.goods.express||0))]),t._v(" "),e("van-col",{attrs:{span:"9"}},[t._v("剩余："+t._s(t.goods.amount))]),t._v(" "),e("van-col",{staticClass:"like",attrs:{span:"6"}},[t._v("\n              "+t._s(t.isCollectionFlag?"收藏":"取消收藏")+"：\n              "),e("van-icon",{staticClass:"like-o",class:{like2:!t.isCollectionFlag},attrs:{name:t.isCollectionFlag?"like-o":"like"},on:{click:t.collection}})],1)],1)],1),t._v(" "),e("van-cell-group",{staticClass:"goods-cell-group"},[e("van-cell",{attrs:{value:"进入店铺",icon:"shop","is-link":""}},[e("template",{slot:"title"},[e("span",{staticClass:"van-cell-text"},[t._v("有赞的店")]),t._v(" "),e("van-tag",{staticClass:"goods-tag",attrs:{type:"danger"}},[t._v("官方")])],1)],2)],1),t._v(" "),e("div",[e("van-tabs",{staticClass:"datails-tabs",model:{value:t.active,callback:function(s){t.active=s},expression:"active"}},t._l(t.item,function(s){return e("van-tab",{key:s.id,attrs:{title:s.title}},[e("div",{directives:[{name:"show",rawName:"v-show",value:0==t.active,expression:"active == 0"}],staticClass:"active-0",domProps:{innerHTML:t._s(t.goodsDetails.detail||t.goods.detail)}}),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:1==t.active,expression:"active == 1"}],staticClass:"active-1"},[t._l(t.dataArr,function(s){return e("div",{key:s._id,staticClass:"comment"},[e("div",{staticClass:"comment-content"},[e("div",{staticClass:"avatar"},[s.anonymous?e("img",{attrs:{src:s.comment_avatar,alt:"",srcset:""}}):e("img",{attrs:{src:s.user[0].avatar,onerror:t.defaultImg,alt:"",srcset:""}})]),t._v(" "),e("div",{staticClass:"desc border-bottom"},[e("p",{staticClass:"fist"},[s.anonymous?e("span",{staticClass:"name"},[t._v(t._s(s.comment_nickname)+"：")]):e("span",{staticClass:"name"},[t._v(t._s(s.user[0].nickname)+"：")]),t._v(" "),e("span",{staticClass:"num"},[t._v(t._s(s.comment_time))])]),t._v(" "),e("p",{staticClass:"timer"},[e("van-rate",{attrs:{readonly:"",size:12,color:"#e0322b"},model:{value:s.rate,callback:function(e){t.$set(s,"rate",e)},expression:"val.rate"}})],1),t._v(" "),e("p",{staticClass:"cont"},[t._v(t._s(s.content))])])])])}),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.dataArr.length,expression:"!dataArr.length"}],staticClass:"nocomment"},[t._v("该商品暂无评论噢~~")])],2)])}))],1)],1)],1)]),t._v(" "),e("transition",{attrs:{name:"bounce2"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.showBase,expression:"showBase"}],staticClass:"sku",class:{sku2:t.showBase}},[e("van-icon",{staticClass:"close",attrs:{name:"close"},on:{click:function(s){t.showBase=!1}}}),t._v(" "),e("div",{staticClass:"goods-top border-bottom"},[e("img",{staticClass:"image_path",attrs:{src:t.goods.image_path,onerror:t.defaultImg}}),t._v(" "),e("div",{staticClass:"goods-right"},[e("p",{staticClass:"goods-name"},[t._v(t._s(t.goods.name))]),t._v(" "),e("p",{staticClass:"pic"},[e("span",[t._v("￥")]),t._v(" "),e("span",[t._v(t._s((t.goods.present_price*t.newCount).toFixed(2)))])])])]),t._v(" "),e("div",{staticClass:"goods-bottom border-bottom"},[e("div",{staticClass:"left"},[e("p",{staticClass:"num"},[t._v("购买数量：")]),t._v(" "),e("p",{staticClass:"totle"},[t._v("\n            剩余 "+t._s(t.goods.amount)+" 件\n            "),e("span",[t._v("每人限购50件")])])]),t._v(" "),e("AdditionAndSubtraction",{on:{count:t.count}})],1),t._v(" "),e("div",{staticClass:"bottom",on:{click:t.PurchaseImmediately}},[t._v("立即购买")])],1)]),t._v(" "),e("transition",{attrs:{name:"fade"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.showBase,expression:"showBase"}],staticClass:"sku-layer",on:{click:function(s){t.showBase=!1}}})]),t._v(" "),e("van-goods-action",{staticClass:"van-goods-sku"},[e("van-goods-action-mini-btn",{attrs:{icon:"home"},on:{click:t.goHome}},[t._v("首 页")]),t._v(" "),e("van-goods-action-mini-btn",{attrs:{icon:"cart"},on:{click:t.onClickCart}},[t._v("购物车")]),t._v(" "),e("van-goods-action-big-btn",{on:{click:t.addShops}},[t._v("加入购物车")]),t._v(" "),e("van-goods-action-big-btn",{attrs:{primary:""},on:{click:t.purchase}},[t._v("立即购买")])],1),t._v(" "),e("BaseLoding",{attrs:{showFlag:t.showFlag}}),t._v(" "),e("Back",{on:{back:t.back}})],1)},staticRenderFns:[]};var b=e("VU/8")(w,C,!1,function(t){e("DTB/")},"data-v-3abd29cf",null);s.default=b.exports},wtXQ:function(t,s,e){"use strict";var a={render:function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"icon",on:{click:this.back}},[s("van-icon",{staticClass:"arrow",attrs:{name:"arrow-left"}})],1)},staticRenderFns:[]};var o=e("VU/8")({methods:{back:function(){this.$emit("back")}}},a,!1,function(t){e("JuvI")},"data-v-1280abbf",null);s.a=o.exports}});
//# sourceMappingURL=4.76ebcd67adc76b1acc40.js.map