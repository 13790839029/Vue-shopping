{"version":3,"sources":["webpack:///./src/assets/img/caitiao.jpg","webpack:///src/pages/ShoppingPayMent.vue","webpack:///./src/pages/ShoppingPayMent.vue?3542","webpack:///./src/pages/ShoppingPayMent.vue"],"names":["module","exports","__webpack_require__","p","ShoppingPayMent","components","GoodsList","Scroll","beforeRouteEnter","to","from","next","vm","getDefaultAddress","computed","extends_default","Object","vuex_esm","price","num","this","shopOrderList","length","forEach","item","present_price","count","Number","toFixed","data","caitiao","isOrder","isLoading","list","defaultAdd","methods","_this","asyncToGenerator_default","regenerator_default","a","mark","_callee","_ref","wrap","_context","prev","Api","sent","code","t0","$toast","stop","goBack","_this2","$router","go","setTimeout","setShopList","setVuexAddress","onSubmit","_this3","_callee2","orderId","_ref2","_context2","_id","temporaryAddress","abrupt","console","log","push","cid","placeOrder","address","tel","totalPrice","idDirect","msg","path","goAddress","editAddress","pages_ShoppingPayMent","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","title","left-arrow","on","click-left","_v","click","name","_s","src","width","height","alt","ref","loading","button-text","submit","_e","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/6.0c7b57cce0b968eee0ef.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/img/caitiao.3329a51.jpg\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/img/caitiao.jpg\n// module id = 1muJ\n// module chunks = 6","<template>\r\n    <!-- 订单结算和选择商品页面 -->\r\n    <div class=\"order\">\r\n        <van-nav-bar\r\n                title=\"订单结算\"\r\n                left-arrow\r\n                @click-left=\"goBack\"\r\n        />\r\n                <div class=\"address-warp\">\r\n                    <div class=\"address addnull\" v-if=\"!defaultAdd || !defaultAdd._id && (!temporaryAddress || !temporaryAddress._id)\" @click=\"goAddress\">\r\n                        点击添加收获地址\r\n                    </div>\r\n                    <div class=\"address\" v-else @click=\"editAddress\">\r\n                        <div class=\"icon\"><van-icon name=\"location\" class=\"location\"/></div>\r\n                        <div class=\"address-cont\">\r\n                            <p class=\"name\">收货人: {{temporaryAddress.name || defaultAdd.name}} <span>{{temporaryAddress.tel || defaultAdd.tel}}</span></p>\r\n                            <p class=\"address-e\">收货地址: {{temporaryAddress.address || defaultAdd.address}}</p>\r\n                            <p class=\"no\">(收货不便时,可选择免费待收货服务)</p>\r\n                        </div>\r\n                        <div class=\"icon2\"><van-icon name=\"arrow\" class=\"location\"/></div>\r\n                    </div>\r\n                    <img :src=\"caitiao\" width=\"100%\" height=\"3px\" alt=\"\" class=\"caitiao\">\r\n                <Scroll :data='shopOrderList' ref=\"scroll\" class=\"scroll\">\r\n                    <div class=\"goods-list\">\r\n                        <GoodsList :list='shopOrderList' :isOrder='isOrder'/>\r\n                    </div>\r\n                </Scroll>\r\n            </div>\r\n        \r\n        <div v-if=\"shopOrderList && shopOrderList.length\">\r\n            <van-submit-bar\r\n                :loading='isLoading'\r\n                :price=\"price\"\r\n                button-text=\"提交订单\"\r\n                @submit=\"onSubmit\"\r\n            />\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport GoodsList from '@/components/public/GoodsList'\r\nimport {mapGetters,mapMutations} from 'vuex'\r\nimport Scroll from '@/components/public/Scroll'\r\nexport default {\r\n    components: {\r\n        GoodsList,\r\n        Scroll,\r\n    },\r\n\r\n    beforeRouteEnter (to, from, next) {\r\n        next(vm => {\r\n            vm.getDefaultAddress()\r\n        })\r\n        \r\n    },\r\n    computed: {\r\n        ...mapGetters(['shopOrderList','temporaryAddress']),\r\n\r\n        price() {\r\n            let num = 0\r\n            if (this.shopOrderList.length) {\r\n                    this.shopOrderList.forEach( item => {\r\n                    num += item.present_price * item.count\r\n                })\r\n                return Number( num.toFixed(2) * 100)\r\n            }\r\n        }\r\n    },\r\n\r\n    data() {\r\n        return {\r\n            caitiao: require('img/caitiao.jpg'),\r\n            isOrder: true,\r\n            isLoading: false,\r\n            list: [],\r\n            defaultAdd:''\r\n        }\r\n    },\r\n\r\n    methods: {\r\n        // 查询默认收货地址\r\n        async getDefaultAddress() {\r\n            try {\r\n                const {data} = await this.Api.getDefaultAddress()\r\n                if (data.code == 200) {\r\n                    this.defaultAdd = data.defaultAdd\r\n                }\r\n            } catch (error) {\r\n                this.$toast('网络错误')\r\n            }\r\n            \r\n        },\r\n\r\n        goBack() {\r\n            this.$router.go(-1)\r\n            setTimeout(() => {\r\n                this.setShopList([])\r\n                this.setVuexAddress('')\r\n            }, 300);\r\n        },\r\n\r\n        async onSubmit() {\r\n            if (!this.defaultAdd || !this.defaultAdd._id && (!this.temporaryAddress || !this.temporaryAddress._id)) {\r\n                this.$toast('请添加收获地址')\r\n                return\r\n            }\r\n            this.isLoading = true\r\n            // 传地址id，订单id，和总价格\r\n            let Addressid = 123456745;\r\n            let orderId = []\r\n            console.log(this.shopOrderList);\r\n            \r\n            this.shopOrderList.forEach( item => {\r\n                orderId.push(item.cid)\r\n            })\r\n            \r\n            try {\r\n                const { data } = await this.Api.placeOrder({\r\n                    address:  this.temporaryAddress.address || this.defaultAdd.address,\r\n                    tel: this.temporaryAddress.tel || this.defaultAdd.tel,\r\n                    orderId,\r\n                    totalPrice: (this.price / 100).toFixed(2),\r\n                    idDirect: this.shopOrderList[0].idDirect,\r\n                    count: this.shopOrderList[0].count\r\n                })\r\n                if (data.code == 200) {\r\n                    this.isLoading = false\r\n                    this.$toast(data.msg)\r\n                    setTimeout(() => {\r\n                        this.setShopList([])\r\n                        this.$router.push({path: '/'})\r\n                        // location.href = '/'\r\n                    }, 2000);\r\n                }\r\n            } catch (err) {\r\n                this.isLoading = false\r\n                this.$toast('网络错误')\r\n            }\r\n        },\r\n\r\n        ...mapMutations({\r\n            setShopList: 'SHOPORDERLIST',\r\n            setVuexAddress:'TEMPORARYADDRESS'\r\n        }),\r\n\r\n        // 添加收货地址\r\n        goAddress() {\r\n            this.$router.push({path: '/address'})\r\n        },\r\n\r\n        // 选择地址\r\n        editAddress() {\r\n            this.$router.push({path:'/address'})\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n.order\r\n    position fixed\r\n    top 0px\r\n    left 0\r\n    right 0\r\n    bottom 0px\r\n    z-index 500\r\n    background #fff\r\n    .scroll\r\n        position fixed\r\n        top 148px\r\n        bottom 50px\r\n        left 0\r\n        right 0\r\n        overflow hidden\r\n    .address-warp\r\n        .caitiao\r\n            margin-top -10px\r\n        .addnull\r\n            align-items center\r\n            padding 0!important   \r\n            justify-content center\r\n            font-size 14px\r\n        .address\r\n            display flex\r\n            height 90px\r\n            padding 10px\r\n            padding-bottom 0\r\n            background #fff\r\n            .icon\r\n                flex 0 0 30px \r\n                width 30px\r\n                align-self center\r\n                margin-right 8px\r\n                .location\r\n                    font-size 24px\r\n            .address-cont\r\n                flex 1\r\n                display flex\r\n                flex-direction column\r\n                justify-content space-around    \r\n                .name\r\n                    font-size 15px\r\n                    span \r\n                        float right \r\n                        margin-right 10px\r\n                .address-e\r\n                    font-size 12px\r\n                    margin-right 5px\r\n                    line-height 1.4       \r\n                .no\r\n                    color #F9CC9D\r\n                    font-size 12px     \r\n                    letter-spacing 1px\r\n                    margin-top -5px\r\n            .icon2\r\n                flex 0 0 10px\r\n                align-self center \r\n        .goods-list\r\n            background #fff                   \r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/ShoppingPayMent.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"order\"},[_c('van-nav-bar',{attrs:{\"title\":\"订单结算\",\"left-arrow\":\"\"},on:{\"click-left\":_vm.goBack}}),_vm._v(\" \"),_c('div',{staticClass:\"address-warp\"},[(!_vm.defaultAdd || !_vm.defaultAdd._id && (!_vm.temporaryAddress || !_vm.temporaryAddress._id))?_c('div',{staticClass:\"address addnull\",on:{\"click\":_vm.goAddress}},[_vm._v(\"\\n                    点击添加收获地址\\n                \")]):_c('div',{staticClass:\"address\",on:{\"click\":_vm.editAddress}},[_c('div',{staticClass:\"icon\"},[_c('van-icon',{staticClass:\"location\",attrs:{\"name\":\"location\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"address-cont\"},[_c('p',{staticClass:\"name\"},[_vm._v(\"收货人: \"+_vm._s(_vm.temporaryAddress.name || _vm.defaultAdd.name)+\" \"),_c('span',[_vm._v(_vm._s(_vm.temporaryAddress.tel || _vm.defaultAdd.tel))])]),_vm._v(\" \"),_c('p',{staticClass:\"address-e\"},[_vm._v(\"收货地址: \"+_vm._s(_vm.temporaryAddress.address || _vm.defaultAdd.address))]),_vm._v(\" \"),_c('p',{staticClass:\"no\"},[_vm._v(\"(收货不便时,可选择免费待收货服务)\")])]),_vm._v(\" \"),_c('div',{staticClass:\"icon2\"},[_c('van-icon',{staticClass:\"location\",attrs:{\"name\":\"arrow\"}})],1)]),_vm._v(\" \"),_c('img',{staticClass:\"caitiao\",attrs:{\"src\":_vm.caitiao,\"width\":\"100%\",\"height\":\"3px\",\"alt\":\"\"}}),_vm._v(\" \"),_c('Scroll',{ref:\"scroll\",staticClass:\"scroll\",attrs:{\"data\":_vm.shopOrderList}},[_c('div',{staticClass:\"goods-list\"},[_c('GoodsList',{attrs:{\"list\":_vm.shopOrderList,\"isOrder\":_vm.isOrder}})],1)])],1),_vm._v(\" \"),(_vm.shopOrderList && _vm.shopOrderList.length)?_c('div',[_c('van-submit-bar',{attrs:{\"loading\":_vm.isLoading,\"price\":_vm.price,\"button-text\":\"提交订单\"},on:{\"submit\":_vm.onSubmit}})],1):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-7ac38e44\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/ShoppingPayMent.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-7ac38e44\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ShoppingPayMent.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ShoppingPayMent.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ShoppingPayMent.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7ac38e44\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./ShoppingPayMent.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-7ac38e44\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/ShoppingPayMent.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}