(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-952c4740"],{"0b92":function(t,s,e){"use strict";var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ul",t._l(t.list,function(s,i){return e("li",{key:s._id||s.id,staticClass:"good-item border-bottom",on:{click:function(e){t.details(s)}}},[e("img",{class:{img2:t.isBrowse||t.isCollection||t.isOrder},attrs:{src:s.image||s.image_path,onerror:t.defaultImg}}),e("div",[e("p",{staticClass:"p1"},[t._v(t._s(s.name))]),e("p",{staticClass:"p2"},[t.isOrder?e("span",{staticClass:"pic"},[t._v("￥"+t._s((s.present_price*s.count).toFixed(2)))]):e("span",{staticClass:"pic"},[t._v("￥"+t._s(s.present_price))]),e("span",{staticClass:"orl-pic"},[t._v(t._s(s.orl_price))]),t.isOrder?e("span",{staticClass:"count"},[t._v("x"+t._s(s.count))]):t._e()])]),t.isBrowse||t.isCollection?e("div",{staticClass:"icon"},[e("van-icon",{staticClass:"close",attrs:{name:"close"},on:{click:function(e){e.stopPropagation(),t.close(s,i)}}})],1):t._e()])}),0)},a=[],r={props:{list:{type:null,default:[]},isBrowse:{type:Boolean,default:!1},isCollection:{type:Boolean,default:!1},isOrder:{type:Boolean,default:!1}},computed:{lists:function(){return this.isBrowse?"list":""}},data:function(){return{defaultImg:'this.src="'+e("5307")+'"'}},methods:{details:function(t){this.$emit("details",t)},close:function(t,s){this.$emit("close",t,s)}}},n=r,o=(e("41e2"),e("25c1")),d=Object(o["a"])(n,i,a,!1,null,"2e6ef2c4",null);d.options.__file="GoodsList.vue";s["a"]=d.exports},"41e2":function(t,s,e){"use strict";var i=e("eaee"),a=e.n(i);a.a},"4b1d":function(t,s,e){"use strict";var i=e("8122"),a=e.n(i);a.a},5307:function(t,s,e){t.exports=e.p+"img/vue.63050d8a.jpg"},"5e3b":function(t,s,e){t.exports=e.p+"img/caitiao.3329a51d.jpg"},8122:function(t,s,e){},"9c75":function(t,s,e){"use strict";e.r(s);var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"order"},[e("van-nav-bar",{attrs:{title:"订单结算","left-arrow":""},on:{"click-left":t.goBack}}),e("div",{staticClass:"address-warp"},[t.defaultAdd&&(t.defaultAdd._id||t.temporaryAddress&&t.temporaryAddress._id)?e("div",{staticClass:"address",on:{click:t.editAddress}},[e("div",{staticClass:"icon"},[e("van-icon",{staticClass:"location",attrs:{name:"location"}})],1),e("div",{staticClass:"address-cont"},[e("p",{staticClass:"name"},[t._v("收货人: "+t._s(t.temporaryAddress.name||t.defaultAdd.name)+" "),e("span",[t._v(t._s(t.temporaryAddress.tel||t.defaultAdd.tel))])]),e("p",{staticClass:"address-e"},[t._v("收货地址: "+t._s(t.temporaryAddress.address||t.defaultAdd.address))]),e("p",{staticClass:"no"},[t._v("(收货不便时,可选择免费待收货服务)")])]),e("div",{staticClass:"icon2"},[e("van-icon",{staticClass:"location",attrs:{name:"arrow"}})],1)]):e("div",{staticClass:"address addnull",on:{click:t.goAddress}},[t._v("\n                    点击添加收获地址\n                ")]),e("img",{staticClass:"caitiao",attrs:{src:t.caitiao,width:"100%",height:"3px",alt:""}}),e("Scroll",{ref:"scroll",staticClass:"scroll",attrs:{data:t.shopOrderList}},[e("div",{staticClass:"goods-list"},[e("GoodsList",{attrs:{list:t.shopOrderList,isOrder:t.isOrder}})],1)])],1),t.shopOrderList&&t.shopOrderList.length?e("div",[e("van-submit-bar",{attrs:{loading:t.isLoading,price:t.price,"button-text":"提交订单"},on:{submit:t.onSubmit}})],1):t._e()],1)},a=[],r=(e("b5aa"),e("b8fa")),n=(e("6636"),e("3c1b"),e("175c"),e("bc97"),e("a5be"),e("0b92")),o=e("3d93"),d=e("9134"),c={mixins:[o["e"]],components:{GoodsList:n["a"],Scroll:d["a"]},beforeRouteEnter:function(t,s,e){e(function(t){t.getDefaultAddress()})},computed:{price:function(){var t=0;if(this.shopOrderList.length)return this.shopOrderList.forEach(function(s){t+=s.present_price*s.count}),Number(100*t.toFixed(2))}},data:function(){return{caitiao:e("5e3b"),isOrder:!0,isLoading:!1,list:[],defaultAdd:""}},methods:{getDefaultAddress:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var s,e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.Api.getDefaultAddress();case 3:s=t.sent,e=s.data,200==e.code&&(this.defaultAdd=e.defaultAdd),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),this.$toast("网络错误");case 11:case"end":return t.stop()}},t,this,[[0,8]])}));function s(){return t.apply(this,arguments)}return s}(),goBack:function(){var t=this;this.$router.go(-1),setTimeout(function(){t.setShopList([]),t.setVuexAddress("")},300)},onSubmit:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var s,e,i,a=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.defaultAdd&&(this.defaultAdd._id||this.temporaryAddress&&this.temporaryAddress._id)){t.next=3;break}return this.$toast("请添加收获地址"),t.abrupt("return");case 3:return this.isLoading=!0,123456745,s=[],console.log(this.shopOrderList),this.shopOrderList.forEach(function(t){s.push(t.cid)}),t.prev=8,t.next=11,this.Api.placeOrder({address:this.temporaryAddress.address||this.defaultAdd.address,tel:this.temporaryAddress.tel||this.defaultAdd.tel,orderId:s,totalPrice:(this.price/100).toFixed(2),idDirect:this.shopOrderList[0].idDirect,count:this.shopOrderList[0].count});case 11:e=t.sent,i=e.data,200==i.code&&(this.isLoading=!1,this.$toast(i.msg),setTimeout(function(){a.setShopList([]),a.$router.push({path:"/"})},2e3)),t.next=20;break;case 16:t.prev=16,t.t0=t["catch"](8),this.isLoading=!1,this.$toast("网络错误");case 20:case"end":return t.stop()}},t,this,[[8,16]])}));function s(){return t.apply(this,arguments)}return s}(),goAddress:function(){this.$router.push({path:"/address"})},editAddress:function(){this.$router.push({path:"/address"})}}},l=c,u=(e("4b1d"),e("25c1")),p=Object(u["a"])(l,i,a,!1,null,"e713d74c",null);p.options.__file="ShoppingPayMent.vue";s["default"]=p.exports},eaee:function(t,s,e){}}]);